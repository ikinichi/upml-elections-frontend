"use strict";(self["webpackChunkupml_elections"]=self["webpackChunkupml_elections"]||[]).push([[34],{4053:(e,t,s)=>{s.d(t,{Z:()=>a});const a={serverIp:"https://elections-backend-upml.herokuapp.com/"}},8034:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var a=s(3673);const r=e=>((0,a.dD)("data-v-3f7ef550"),e=e(),(0,a.Cn)(),e),n=r((()=>(0,a._)("h3",{class:"q-mb-sm"},"Вход",-1))),l=(0,a.Uk)("Вход"),o=r((()=>(0,a._)("a",{href:"/",class:"q-mt-md"},"На главную",-1)));function u(e,t,s,r,u,m){const i=(0,a.up)("q-input"),p=(0,a.up)("q-btn"),d=(0,a.up)("q-form"),c=(0,a.up)("q-card"),h=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(h,{class:"flex justify-center items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"q-pa-xl"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"flex column justify-center items-center",onSubmit:m.onSubmit},{default:(0,a.w5)((()=>[n,(0,a.Wm)(i,{type:"text",modelValue:u.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.username=e),"model-value":"",label:"ФИО через пробел",class:"q-mb-md","lazy-rules":"",rules:[e=>!!e||"Это поле обязательное",e=>3===e.split(" ").length&&e.split(" ").map((e=>Boolean(e))).every(Boolean)||"Неправильний формат ФИО"]},null,8,["modelValue","rules"]),(0,a.Wm)(i,{type:"password",modelValue:u.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.password=e),"model-value":"",label:"Пароль",class:"q-mb-md","lazy-rules":"",rules:[e=>!!e||"Это поле обязательное"]},null,8,["modelValue","rules"]),(0,a.Wm)(p,{color:"primary",class:"q-mt-sm",type:"submit"},{default:(0,a.w5)((()=>[l])),_:1}),o])),_:1},8,["onSubmit"])])),_:1})])),_:1})}var m=s(52),i=s.n(m),p=s(4053),d=s(3617),c=s(8825);const h={name:"LoginLayout",setup(){let e=(0,c.Z)();return{triggerNotification(t,s){e.notify({type:s,message:t})}}},mounted(){this.$route.params.name&&(this.username=this.$route.params.name,this.password=this.$route.params.password)},data(){return{username:null,password:null,serverIp:p.Z.serverIp}},computed:{name(){return this.username.toString().split(" ")[1]},surname(){return this.username.toString().split(" ")[0]},patronymic(){return this.username.toString().split(" ")[2]}},methods:{...(0,d.OI)("mainStore",["login","changeRole"]),onSubmit(){i().post(p.Z.serverIp+"login/",{name:this.name,surname:this.surname,patronymic:this.patronymic,password:this.password}).then((e=>{let t=e.data["session_id"];t?(this.login(t),i().get(p.Z.serverIp+"get-role/"+t).then((e=>{this.changeRole(e.data)})),this.$router.push("/")):this.triggerNotification("Неправильное ФИО или пароль","negative")})).catch((e=>{this.triggerNotification(e,"warning")}))}}};var f=s(4260),g=s(4899),y=s(151),w=s(8689),b=s(4689),v=s(4607),q=s(7518),Z=s.n(q);const _=(0,f.Z)(h,[["render",u],["__scopeId","data-v-3f7ef550"]]),I=_;Z()(h,"components",{QLayout:g.Z,QCard:y.Z,QForm:w.Z,QInput:b.Z,QBtn:v.Z})}}]);